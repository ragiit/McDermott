import{_ as t}from"./_tslib-6e8ca86b.js";import{d as e}from"./dom-e3fa5208.js";import{S as i}from"./single-slot-element-base-4ab30292.js";import{C as o}from"./css-classes-f45f6949.js";import{T as n}from"./text-editor-9dfdefa1.js";import{e as s}from"./property-d3853089.js";import{g as a,r,a as l}from"./dom-utils-bc96e95b.js";import{e as c}from"./custom-element-267f9a21.js";import"./browser-f8f6e902.js";import"./common-eb095e4d.js";import"./data-qa-utils-8be7c726.js";import"./dx-ui-element-db9e89a3.js";import"./lit-element-base-7a85dca5.js";import"./lit-element-70cf14f4.js";import"./logicaltreehelper-99f1adf9.js";import"./layouthelper-1d804c8c.js";import"./point-e4ec110e.js";import"./constants-58283e53.js";import"./custom-events-helper-e7f279d3.js";import"./constants-8a482032.js";import"./eventhelper-8570b930.js";import"./devices-23bcdfad.js";function d(t){return{fromAttribute:e=>t[e],toAttribute:e=>t[e]}}class p{}p.Root=o.Prefix+"-fl",p.Loading=p.Root+"-loading",p.RowBreak=p.Root+"-row-break",p.Group=p.Root+"-group",p.GroupBody=p.Group+"-body",p.GroupDecoration=p.Root+"-gd",p.GroupTab=p.Root+"-gt",p.GroupHeaderTemplate=p.Root+"-group-header-tmpl",p.Item=p.Root+"-item",p.TabItem=p.Root+"-tab-item",p.Caption=p.Root+"-cpt",p.EmptyCaption=p.Root+"-empty-caption",p.BeginRow=p.Root+"-begin-row",p.TabContent=p.Root+"-tab-content",p.ItemContentWithCaption=p.Root+"-ctrl",p.ItemContentWithoutCaption=p.Root+"-ctrl-nc",p.ItemHorizontal=p.Root+"-item-horizontal",p.HeaderContentTemplate=p.Root+"-header-content-tmpl",p.CaptionTemplate=p.Root+"-caption-tmpl",p.ItemCaptionWidthCalculation=p.Root+"-calc",p.Row=o.Prefix+"-row";const u="dxbl-form-layout-item";class m extends i{constructor(){super(),this._currentCaption=null,this.captionFor=null}get useShadowDom(){return!1}_findFormLayout(){let t=this.parentNode;for(;t&&!(t instanceof I);)t=null==t?void 0:t.parentNode;return t}contentChanged(){var t;super.contentChanged();const e=this.initAndGetCaptionForInput();if((null===(t=this._currentCaption)||void 0===t?void 0:t.innerHTML)!==(null==e?void 0:e.innerHTML)){const t=this._findFormLayout();null==t||t.calculateAdaptivityCssRules()}this._currentCaption=e}initAndGetCaptionForInput(){var t;const e=this.getCaption();if(e&&""!==this.captionFor){const i=this.captionFor||(null===(t=this.getEditorInput())||void 0===t?void 0:t.id);i&&(e.htmlFor=i)}return e}getCaption(){return this.querySelector(`:scope > .${p.Caption}`)}getEditorInput(){return this.querySelector(`.${n.TextEdit} > input, .${n.TextEdit} > textarea, .dxbl-checkbox-check-element > input`)}}var h;t([s({attribute:"caption-for"})],m.prototype,"captionFor",void 0),function(t){t.v4="v4",t.v5="v5"}(h||(h={}));const C={};function v(t){!function(t,i,o){const n=C[t]||(C[t]=e.DomUtils.getCurrentStyle(document.body).getPropertyValue(t)||i);if(n){const t=a();t&&t.insertRule("@media (min-width: "+n+") {\n"+o+"\n}\n",t.cssRules.length)}}("--breakpoint-lg","992px",t)}var y,f;!function(t){t[t.None=0]="None",t[t.InGroups=1]="InGroups",t[t.All=2]="All"}(y||(y={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(f||(f={}));const g=` > .${p.Caption}`,b=t=>`${u}[fl-id=${t}].${p.Item}.${p.ItemHorizontal}`,R=/\./g;class A extends i{constructor(){super(...arguments),this.captionAlignment=y.InGroups}get itemSelector(){return` > .${p.Row} > ${b(this.mainElementId)}`}get mainElementId(){return this.id}getMainElement(){return document.getElementById(this.mainElementId)}calculateAdaptivityCssRules(){}startCalculationItems(t){const e=this.querySelectorAll(`:scope${` .${t}`}[fl-id=${this.mainElementId}]`);for(let t=0;t<e.length;t++)e[t].calculateAdaptivityCssRules()}updateGroups(){this.startCalculationItems(p.Group)}updateTabs(){this.startCalculationItems(p.TabContent)}createAdaptivityCssRules(){var t;let i=0;e.DomUtils.addClassName(this,p.ItemCaptionWidthCalculation);const o=` ${p.Group}[fl-id=${this.mainElementId}] .${p.GroupBody}[expanded-state=False]`,n=null===(t=this.getMainElement())||void 0===t?void 0:t.querySelectorAll(`:scope${o}`),s=t=>{for(let e=0;e<(null==n?void 0:n.length);e++)n[e].style.display=t?"":"none",n[e].style.visibility=t?"hidden":""};s(!0);const a=this.findCaptions();a&&a.length>0&&(i=this.getMaxCaptionWidth(a),this.createAdaptivityCssRulesForElements(i)),s(!1),e.DomUtils.removeClassName(this,p.ItemCaptionWidthCalculation)}findCaptions(){return[...this.querySelectorAll(`:scope${this.itemSelector}${g}`)]}createAdaptivityCssRulesForElements(t){this.createCssRulesForElementsInternal(t,!1,!1)}getMaxCaptionWidth(t){let e=0;if(t.length>0){const i=t.find((t=>t.classList.contains(p.EmptyCaption)));let o="0 px";i&&(o=window.getComputedStyle(i,null).getPropertyValue("height"));for(let i=0;i<t.length;i++){const n=t[i].offsetWidth;this.isEmptyCaption(t[i])&&(t[i].style.height=o);const s=t[i].parentNode;s&&n>e&&n<s.offsetWidth&&(e=n)}}return e>0?e+1:0}isEmptyCaption(t){return t.classList.contains(p.EmptyCaption)}getFilteredElements(t){return r(t,(t=>l(t,p.Root)===this))}encodeDotsForMediaQuiery(t){return t.replace(R,"\\$&")}getAdaptivityCssRulesPrefix(){const t=this.getMainElement();if(!t)return null;let e=`.${p.Root}`,i=t;for(;i;)e=" #"+this.encodeDotsForMediaQuiery(i.id)+e,i=l(i.parentNode,p.Root);e.slice(1);let o="",n=this;for(;n&&n!==t&&t.contains(n);)n.id&&(o=" #"+this.encodeDotsForMediaQuiery(n.id)+o),n=l(n.parentNode,p.Group);return e+=o,e}createCssRulesForElementsInternal(t,e,i){if(0===t)return;this.itemCaptionWidth=t;const o=this.getAdaptivityCssRulesPrefix(),n=this.captionAlignment===y.InGroups?this.itemSelector:` ${b(this.mainElementId)}`;let s=o+n+`${g} {\n width:`+t+"px;\n}\n";s+=o+n+` > .${p.ItemContentWithCaption}:not(img):not(.${p.EmptyCaption} + .${p.ItemContentWithCaption}):not(.${p.ItemContentWithoutCaption}) {\n width: calc(100% - `+t+"px);\n}\n",v(s)}}t([s({attribute:"caption-alignment",type:y,converter:d(y)})],A.prototype,"captionAlignment",void 0);class I extends A{constructor(){super(),this._enchancedCallback=()=>{},this._calculationProcess=null,this.sizeMode=f.Medium,this._isRendered=!1,this._mutationObserver=new MutationObserver((t=>{this.itemVisibilityChangeHandler(t)})),this._enchancedCallback=()=>this.calculateAdaptivityCssRules()}needReasignAttributes(){return!1}connectedCallback(){var t;super.connectedCallback(),(null===(t=window.Blazor)||void 0===t?void 0:t.addEventListener)&&window.Blazor.addEventListener("enhancedload",this._enchancedCallback),this._mutationObserver.observe(this,{childList:!0,subtree:!0})}disconnectedCallback(){var t;super.disconnectedCallback(),this._isRendered=!1,this._mutationObserver.disconnect(),(null===(t=window.Blazor)||void 0===t?void 0:t.removeEventListener)&&window.Blazor.removeEventListener("enhancedload",this._enchancedCallback)}itemVisibilityChangeHandler(t){if(this._isRendered){t.some((t=>(t.addedNodes.length||t.removedNodes.length)&&t.target.classList.contains("dxbl-row")))&&this.calculateAdaptivityCssRules()}}willUpdate(t){(t.has("sizeMode")||t.has("captionAlignment"))&&this.calculateAdaptivityCssRules()}findCaptions(){return this.captionAlignment===y.All?this.getFilteredElements(this.querySelectorAll(`${b(this.mainElementId)}:not(.${o.Invisible})`+g)):super.findCaptions()}calculateAdaptivityCssRules(){this._calculationProcess&&clearTimeout(this._calculationProcess),this._calculationProcess=setTimeout((()=>{this.captionAlignment!==y.None&&this.createAdaptivityCssRules(),this.captionAlignment===y.InGroups&&(this.updateGroups(),this.updateTabs()),e.DomUtils.removeClassName(this,p.Loading),this._isRendered=!0}))}}t([s({attribute:"size-mode",type:f,converter:d(f)})],I.prototype,"sizeMode",void 0);class E extends A{constructor(t){super(),this._isMainTabElement=t,this.flId=""}get mainElementId(){return this.flId}calculateAdaptivityCssRules(){this.captionAlignment!==y.None&&this.createAdaptivityCssRules()}}t([s({attribute:"fl-id",type:String})],E.prototype,"flId",void 0);class ${}$.Group=o.Prefix+"-group",$.Header=$.Group+"-header",$.Body=$.Group+"-body",$.BodyContent=$.Body+"-content";let x=class extends E{constructor(){super(!0),this.isActiveTab=!1}get itemSelector(){return` > .${p.Row} > .${p.TabItem}.${p.ItemHorizontal}`}willUpdate(t){t.has("isActiveTab")&&this.isActiveTab&&(this.captionAlignment===y.InGroups&&(this.calculateAdaptivityCssRules(),this.updateTabs(),this.updateGroups()),this.captionAlignment===y.All&&this.getMainElement().calculateAdaptivityCssRules())}createAdaptivityCssRulesForElements(t){this.createCssRulesForElementsInternal(t,!0,!1)}};t([s({attribute:"is-active-tab",type:Boolean})],x.prototype,"isActiveTab",void 0),x=t([c("dxbl-form-layout-tab")],x);let G=class extends E{constructor(){super(!1)}get itemSelector(){const t=` > .${p.Row} > ${b(this.flId)}`,e=` > .${$.Group} > .${$.Body} > .${$.BodyContent}${t}`;return this.isMainElementCardGroup()?e:t}isMainElementCardGroup(){return this.classList.contains(p.GroupDecoration)}createAdaptivityCssRulesForElements(t){this.createCssRulesForElementsInternal(t,!1,this.isMainElementCardGroup())}};G=t([c("dxbl-form-layout-group")],G);let w=class extends m{};w=t([c(u)],w);let F=class extends I{};F=t([c("dxbl-form-layout")],F);export{F as DxFormLayout,w as DxFormLayoutItem,G as dxFormLayoutGroup,x as dxFormLayoutTab};
