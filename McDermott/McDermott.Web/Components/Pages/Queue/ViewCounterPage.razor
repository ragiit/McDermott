@page "/queue/counter-view/{id:int}"
@rendermode InteractiveServer
<PageTitle>McDermott - Counter View</PageTitle>
<div class="wrapper">
    <section class="content">
        <div class="container-fluid">
            <div class=" row">
                <div class="col">
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="row justify-content-arround">
                                <div class="col-md-4">
                                    <DxButton Text="Back" Click="CloseDetail" CssClass="fs-6 fw-bolder" IconCssClass="fa-solid fa-arrow-left" />
                                </div>
                                <div class="col-md-6">
                                    <h4>@NameCounter.ToUpper()</h4>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            @if (sId == null && PhysicianId == null)
                            {
                                <div class="row">
                                    <div class="col-5">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>User</label>
                                            </div>
                                            <div class="col-6">
                                                <p class="mt-0">@userBy </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 text-end"><i>@DateOnly.FromDateTime(DateTime.Now).ToString("dd MMMM yyyy")</i></div>
                                    <hr class="px-0" />
                                </div>
                                <div class="row">
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-5">
                                                <label>Service Counter</label>
                                            </div>
                                            <div class="col-6">
                                                <p>@NameServicesK</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>Service </label>
                                            </div>
                                            <div class="col-6">
                                                <p>@NameServices</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>Physicion</label>
                                            </div>
                                            <div class="col-6">
                                                <p>@Phy</p>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="px-0" />
                                </div>
                                <div class="row mt-3">
                                    <div class="col">
                                        <DxGrid @ref="Grid"
                                                Data="@KiosksQueue"
                                                PageSize="10"
                                                ColumnResizeMode="GridColumnResizeMode.NextColumn"
                                                AllowSelectRowByClick="true"
                                                PagerPosition="GridPagerPosition.Bottom"
                                                PageSizeSelectorVisible="true"
                                                PageSizeSelectorItems="@(new int[] { 10, 20, 50, 100 })"
                                                PageSizeSelectorAllRowsItemVisible="true"
                                                PagerSwitchToInputBoxButtonCount="10"
                                                PagerVisibleNumericButtonCount="10"
                                                CustomizeElement="Grid_CustomizeElement"
                                                KeyboardNavigationEnabled="true">
                                            <Columns>
                                                <DxGridDataColumn FieldName="NoQueue" Caption="No" DisplayFormat="{0:000}" Width="3px" />
                                                <DxGridDataColumn FieldName="Kiosk.Patient.Name" Caption="Patient Name" SortIndex="0" Width="190px" />
                                                <DxGridDataColumn FieldName="Kiosk.Service.Name" Caption="Service" Width="150px"/>
                                                <DxGridDataColumn FieldName="Kiosk.Physician.Name" Caption="Phycisian" Width="170px"/>
                                                <DxGridDataColumn FieldName="Status" Caption="Status" Width="70px">
                                                    <CellDisplayTemplate>
                                                        @GetIssuePriorityIconHtml((context.DataItem as KioskQueueDto).Status)
                                                    </CellDisplayTemplate>
                                                </DxGridDataColumn>
                                                <DxGridDataColumn FieldName="Kiosk.Patient.Name" Caption="Action" SortIndex="0">
                                                    <CellDisplayTemplate>
                                                        @{
                                                            var a = (KioskQueueDto)context.DataItem;
                                                        }
                                                        @if (a.Status == null)
                                                        {
                                                            <DxButton RenderStyle="ButtonRenderStyle.Info" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-brands fa-whatsapp" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                        }
                                                        else if (a.Status == "call")
                                                        {
                                                            <DxButton RenderStyle="ButtonRenderStyle.Info" Text="Call" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-brands fa-whatsapp" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                            <DxButton RenderStyle="ButtonRenderStyle.Success" Text="Present" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-solid fa-clipboard-check" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                            <DxButton RenderStyle="ButtonRenderStyle.Danger" Text="Absent" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-solid fa-circle-minus" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                        }
                                                    </CellDisplayTemplate>
                                                </DxGridDataColumn>
                                            </Columns>
                                        </DxGrid>
                                    </div>
                                </div>
                            }
                            else if (sId != null && PhysicianId != null)
                            {
                                <div class="row">
                                    <div class="col-5">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>User</label>
                                            </div>
                                            <div class="col-6">
                                                <p class="mt-0">@userBy </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 text-end"><i>@DateOnly.FromDateTime(DateTime.Now).ToString("dd MMMM yyyy")</i></div>
                                    <hr class="px-0" />
                                </div>
                                <div class="row">
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-5">
                                                <label>Service Counter</label>
                                            </div>
                                            <div class="col-6">
                                                <p>@NameServicesK</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>Service </label>
                                            </div>
                                            <div class="col-6">
                                                <p>@NameServices</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>Physicion</label>
                                            </div>
                                            <div class="col-6">
                                                <p>@Phy</p>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="px-0" />
                                </div>
                                <div class="row mt-3">
                                    <div class="col">
                                        <DxGrid @ref="Grid"
                                                Data="@KiosksQueue"
                                                PageSize="10"
                                                ColumnResizeMode="GridColumnResizeMode.NextColumn"
                                                AllowSelectRowByClick="true"
                                                PagerPosition="GridPagerPosition.Bottom"
                                                PageSizeSelectorVisible="true"
                                                PageSizeSelectorItems="@(new int[] { 10, 20, 50, 100 })"
                                                PageSizeSelectorAllRowsItemVisible="true"
                                                PagerSwitchToInputBoxButtonCount="10"
                                                PagerVisibleNumericButtonCount="10"
                                                CustomizeElement="Grid_CustomizeElement"
                                                KeyboardNavigationEnabled="true">
                                            <Columns>
                                                <DxGridDataColumn FieldName="NoQueue" Caption="No" DisplayFormat="{0:000}" Width="3px" />
                                                <DxGridDataColumn FieldName="Kiosk.Patient.Name" Caption="Patient Name" SortIndex="0"  />                                                
                                                <DxGridDataColumn FieldName="Status" Caption="Status" >
                                                    <CellDisplayTemplate>
                                                        @GetIssuePriorityIconHtml((context.DataItem as KioskQueueDto).Status)
                                                    </CellDisplayTemplate>
                                                </DxGridDataColumn>
                                                <DxGridDataColumn FieldName="Kiosk.Patient.Name" Caption="Action" SortIndex="0">
                                                    <CellDisplayTemplate>
                                                        @{
                                                            var a = (KioskQueueDto)context.DataItem;
                                                        }
                                                        @if (a.Status == null)
                                                        {
                                                            <DxButton RenderStyle="ButtonRenderStyle.Info" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-brands fa-whatsapp" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                        }
                                                        else if (a.Status == "call")
                                                        {
                                                            <DxButton RenderStyle="ButtonRenderStyle.Info" Text="Call" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-brands fa-whatsapp" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                            <DxButton RenderStyle="ButtonRenderStyle.Success" Text="Present" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-solid fa-clipboard-check" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                            <DxButton RenderStyle="ButtonRenderStyle.Danger" Text="Absent" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-solid fa-circle-minus" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                        }
                                                    </CellDisplayTemplate>
                                                </DxGridDataColumn>
                                            </Columns>
                                        </DxGrid>
                                    </div>
                                </div>
                            }
                            else if (sId != null && PhysicianId == null)
                            {
                                <div class="row">
                                    <div class="col-5">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>User</label>
                                            </div>
                                            <div class="col-6">
                                                <p class="mt-0">@userBy </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 text-end"><i>@DateOnly.FromDateTime(DateTime.Now).ToString("dd MMMM yyyy")</i></div>
                                    <hr class="px-0" />
                                </div>
                                <div class="row">
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-5">
                                                <label>Service Counter</label>
                                            </div>
                                            <div class="col-6">
                                                <p>@NameServicesK</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>Service </label>
                                            </div>
                                            <div class="col-6">
                                                <p>@NameServices</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>Physicion</label>
                                            </div>
                                            <div class="col-6">
                                                <p>@Phy</p>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="px-0" />
                                </div>
                                <div class="row mt-3">
                                    <div class="col">
                                        <DxGrid @ref="Grid"
                                                Data="@KiosksQueue"
                                                PageSize="10"
                                                ColumnResizeMode="GridColumnResizeMode.NextColumn"
                                                AllowSelectRowByClick="true"
                                                PagerPosition="GridPagerPosition.Bottom"
                                                PageSizeSelectorVisible="true"
                                                PageSizeSelectorItems="@(new int[] { 10, 20, 50, 100 })"
                                                PageSizeSelectorAllRowsItemVisible="true"
                                                PagerSwitchToInputBoxButtonCount="10"
                                                PagerVisibleNumericButtonCount="10"
                                                CustomizeElement="Grid_CustomizeElement"
                                                KeyboardNavigationEnabled="true">
                                            <Columns>
                                                <DxGridDataColumn FieldName="NoQueue" Caption="No" DisplayFormat="{0:000}" Width="3px" />
                                                <DxGridDataColumn FieldName="Kiosk.Patient.Name" Caption="Patient Name" SortIndex="0" Width="190px" />                                                
                                                <DxGridDataColumn FieldName="Kiosk.Physician.Name" Caption="Phycisian" Width="170px" />
                                                <DxGridDataColumn FieldName="Status" Caption="Status" Width="70px">
                                                    <CellDisplayTemplate>
                                                        @GetIssuePriorityIconHtml((context.DataItem as KioskQueueDto).Status)
                                                    </CellDisplayTemplate>
                                                </DxGridDataColumn>
                                                <DxGridDataColumn FieldName="Kiosk.Patient.Name" Caption="Action" SortIndex="0">
                                                    <CellDisplayTemplate>
                                                        @{
                                                            var a = (KioskQueueDto)context.DataItem;
                                                        }
                                                        @if (a.Status == null)
                                                        {
                                                            <DxButton RenderStyle="ButtonRenderStyle.Info" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-brands fa-whatsapp" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                        }
                                                        else if (a.Status == "call")
                                                        {
                                                            <DxButton RenderStyle="ButtonRenderStyle.Info" Text="Call" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-brands fa-whatsapp" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                            <DxButton RenderStyle="ButtonRenderStyle.Success" Text="Present" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-solid fa-clipboard-check" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                            <DxButton RenderStyle="ButtonRenderStyle.Danger" Text="Absent" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-solid fa-circle-minus" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                        }
                                                    </CellDisplayTemplate>
                                                </DxGridDataColumn>
                                            </Columns>
                                        </DxGrid>
                                    </div>
                                </div>
                            }
                            else if (sId == null && PhysicianId != null)
                            {
                                <div class="row">
                                    <div class="col-5">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>User</label>
                                            </div>
                                            <div class="col-6">
                                                <p class="mt-0">@userBy </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 text-end"><i>@DateOnly.FromDateTime(DateTime.Now).ToString("dd MMMM yyyy")</i></div>
                                    <hr class="px-0" />
                                </div>
                                <div class="row">
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-5">
                                                <label>Service Counter</label>
                                            </div>
                                            <div class="col-6">
                                                <p>@NameServicesK</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>Service </label>
                                            </div>
                                            <div class="col-6">
                                                <p>@NameServices</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row">
                                            <div class="col-4">
                                                <label>Physicion</label>
                                            </div>
                                            <div class="col-6">
                                                <p>@Phy</p>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="px-0" />
                                </div>
                                <div class="row mt-3">
                                    <div class="col">
                                        <DxGrid @ref="Grid"
                                                Data="@KiosksQueue"
                                                PageSize="10"
                                                ColumnResizeMode="GridColumnResizeMode.NextColumn"
                                                AllowSelectRowByClick="true"
                                                PagerPosition="GridPagerPosition.Bottom"
                                                PageSizeSelectorVisible="true"
                                                PageSizeSelectorItems="@(new int[] { 10, 20, 50, 100 })"
                                                PageSizeSelectorAllRowsItemVisible="true"
                                                PagerSwitchToInputBoxButtonCount="10"
                                                PagerVisibleNumericButtonCount="10"
                                                CustomizeElement="Grid_CustomizeElement"
                                                KeyboardNavigationEnabled="true">
                                            <Columns>
                                                <DxGridDataColumn FieldName="NoQueue" Caption="No" DisplayFormat="{0:000}" Width="3px" />
                                                <DxGridDataColumn FieldName="Kiosk.Patient.Name" Caption="Patient Name" SortIndex="0" Width="190px" />
                                                <DxGridDataColumn FieldName="Kiosk.Service.Name" Caption="Service" Width="150px" />                                                
                                                <DxGridDataColumn FieldName="Status" Caption="Status" Width="70px">
                                                    <CellDisplayTemplate>
                                                        @GetIssuePriorityIconHtml((context.DataItem as KioskQueueDto).Status)
                                                    </CellDisplayTemplate>
                                                </DxGridDataColumn>
                                                <DxGridDataColumn FieldName="Kiosk.Patient.Name" Caption="Action" SortIndex="0">
                                                    <CellDisplayTemplate>
                                                        @{
                                                            var a = (KioskQueueDto)context.DataItem;
                                                        }
                                                        @if (a.Status == null)
                                                        {
                                                            <DxButton RenderStyle="ButtonRenderStyle.Info" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-brands fa-whatsapp" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                        }
                                                        else if (a.Status == "call")
                                                        {
                                                            <DxButton RenderStyle="ButtonRenderStyle.Info" Text="Call" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-brands fa-whatsapp" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                            <DxButton RenderStyle="ButtonRenderStyle.Success" Text="Present" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-solid fa-clipboard-check" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                            <DxButton RenderStyle="ButtonRenderStyle.Danger" Text="Absent" RenderStyleMode="@ButtonRenderStyleMode.Outline" IconCssClass="fa-solid fa-circle-minus" @onclick="() => Click_Call(a.Id)"></DxButton>
                                                        }
                                                    </CellDisplayTemplate>
                                                </DxGridDataColumn>
                                            </Columns>
                                        </DxGrid>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </section>
</div>
